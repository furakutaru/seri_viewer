# セリ市ビューワー TODO

## Phase 1: データ取り込みAPI実装
- [x] Webカタログ解析ロジックの実装（既存のparseCatalog関数を改善）
- [x] PDF測尺データ抽出ロジックの実装（既存のparsePdfMeasurements関数を改善）
- [x] データベース保存ロジックの実装
- [x] tRPCエンドポイントの実装（importData手続き）
- [x] エラーハンドリングの実装

## Phase 2: 管理画面UIの実装
- [x] 管理画面ページの作成（/admin/import）
- [x] Webカタログ一覧URLの入力フォーム
- [x] 複数PDFファイルのアップロード機能
- [x] データ取り込みボタンと進捗表示
- [x] 取り込み結果の表示

## Phase 3: データ取り込みテストと検証
- [x] テストデータでの動作確認
- [x] 父馬名・母馬名の重複修正の検証
- [x] ユニットテストの作成と実行

## Phase 4: チェックポイント作成と完了
- [x] 修正内容の確認
- [x] 最終チェックポイント作成

## Phase 5: キャッシュ機能の復元
- [x] キャッシュ機能の実装（HTMLとPDFの両方）
- [x] キャッシュクリア機能の実装
- [x] JSON解析エラーの修正

## 実装完了機能

### キャッシュ機能
- Webカタログと測尺PDFを自動的に`.cache`ディレクトリに保存
- 同じURLを再度使用する場合、キャッシュから読み込み
- スクレイピング先への負荷を軽減

### データ取り込み機能
- Webカタログ一覧URLから馬情報を自動抽出
- 複数のPDF測尺データを統合
- 父馬名・母馬名の重複を自動修正
- データベースに統合保存

### 管理画面
- 直感的なUIでURLを入力
- 複数PDFのサポート
- リアルタイム進捗表示
- 取り込み結果の詳細表示

### テスト
- 測尺データ解析のユニットテスト（3つのテストケース）
- 父馬名重複修正の検証
- 全テスト成功
