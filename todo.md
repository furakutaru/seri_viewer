# セリ市ビューワー 実装TODO

## Phase 1: データベース・初期データ取り込み
- [x] Drizzleスキーマ設計・実装（horses, userCheckItems, userChecks, userCheckResults, popularityStats）
- [x] マイグレーション実行（pnpm db:push）
- [x] サンプルセリデータ取り込みスクリプト作成（Webカタログ解析、PDF解析）
- [x] API: セリ一覧取得、馬一覧取得（フィルタリング対応）
- [ ] ユニットテスト作成（データベース操作）

## Phase 2: 一覧画面・フィルタリング・ソート
- [x] 一覧画面UI実装（テーブル形式）
- [x] フィルタリングUI実装（父、牧場、即尺範囲、評価、消フラグ）
- [x] ソート機能実装（スコア、父、牧場など）
- [ ] 一覧でのクイック評価更新UI（◎○△、消フラグ）
- [ ] ユニットテスト作成（フィルタリング・ソート）

## Phase 3: 詳細ビューワー・シームレスナビゲーション
- [x] 2分割画面レイアウト実装（左：情報、右：血統PDF）
- [x] 写真・動画プレイヤー実装
- [x] 即尺データ表示
- [ ] 前/次ボタンナビゲーション実装
- [ ] サイドバーリスト展開機能
- [x] ユニットテスト作成（ナビゲーション）

## Phase 4: 評価・スコアリング・チェックリスト
- [ ] チェックリスト管理UI実装（展開/折りたたみ）
- [ ] 目視評価項目のチェック機能
- [ ] 自動判定項目の自動チェック表示
- [ ] スコア計算ロジック実装
- [ ] チェック項目の追加・編集機能
- [ ] フリーワードメモ機能
- [ ] API: チェック項目CRUD、チェック結果保存
- [ ] ユニットテスト作成（スコア計算、チェック管理）

## Phase 5: 比較機能・統計表示・JBIS連携
- [ ] 比較画面UI実装（一覧表示）
- [ ] 比較画面での評価更新機能
- [ ] 統計表示実装（◎○△集計）
- [ ] JBIS検索リンク生成機能
- [ ] API: 統計データ取得
- [ ] ユニットテスト作成（比較・統計）

## Phase 6: 最終調整・テスト・デプロイ
- [ ] UI/UX調整（レスポンシブ対応、PC・タブレット）
- [ ] パフォーマンス最適化
- [ ] 全機能の統合テスト
- [ ] エラーハンドリング・ユーザーフィードバック
- [ ] ドキュメント作成
- [ ] チェックポイント作成・デプロイ準備

## 完了項目
- [x] データベーススキーマ設計
- [x] tRPCルーター実装（馬データ、ユーザー評価、チェックリスト関連）
- [x] 一覧画面UI実装
- [x] ホームページ実装
- [x] 詳細ビューワー（2分割画面）実装
- [x] 評価機能（◎○△、消フラグ）実装
- [x] メモ機能実装
- [x] JBIS検索リンク実装


## Phase 4: チェックリスト・スコアリング機能（完了）
- [x] バックエンド: チェックリスト項目CRUD API実装
- [x] バックエンド: チェック結果保存・更新API実装
- [x] バックエンド: スコア計算ロジック実装
- [x] フロントエンド: チェックリスト管理UI実装（展開/折りたたみ）
- [x] フロントエンド: 評価項目追加・編集機能実装
- [x] フロントエンド: 詳細画面へのチェックリスト表示
- [x] フロントエンド: スコア計算・リアルタイム更新
- [x] ユニットテスト作成（スコア計算、チェック管理）


## Phase 5: 比較機能（次のステップ）
- [ ] バックエンド: 複数馬の情報取得API実装
- [ ] フロントエンド: 比較画面コンポーネント作成
- [ ] フロントエンド: 馬選択・チェック機能実装
- [ ] フロントエンド: 比較画面での評価更新機能
- [ ] フロントエンド: ◎だけ表示などのフィルタリング機能
- [ ] ユニットテスト作成（比較機能）

## Phase 6: 前/次ナビゲーション＆Webカタログ・PDF自動解析
- [ ] 詳細画面での前/次ボタン実装
- [ ] Webカタログ解析スクリプト作成
- [ ] PDF即尺データ抽出スクリプト作成
- [ ] 複数セリへの対応
- [ ] ユニットテスト作成（データ取り込み）
